<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MBJVZS7Z');</script>
    <!-- End Google Tag Manager -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Learn production-tested patterns for context engineering in AI agents. Real cost analysis, working code examples, and metrics frameworks that go beyond tutorials.">
    <title>Context Engineering for AI Agents: Managing the Finite Resource That Determines Success | Fenlo AI</title>

    <!-- Security Headers -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta http-equiv="X-Frame-Options" content="SAMEORIGIN">
    <meta http-equiv="X-XSS-Protection" content="1; mode=block">
    <meta name="referrer" content="strict-origin-when-cross-origin">

    <!-- SEO -->
    <meta name="author" content="Fenlo AI">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://fenloai.com/pages/blog/context-engineering.html">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="../../assets/fenloai-icon.svg">

    <!-- Preload Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Open Graph -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://fenloai.com/pages/blog/context-engineering.html">
    <meta property="og:title" content="Context Engineering for AI Agents: Managing the Finite Resource That Determines Success">
    <meta property="og:description" content="Learn production-tested patterns for context engineering in AI agents. Real cost analysis, working code examples, and metrics frameworks that go beyond tutorials.">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Context Engineering for AI Agents: Managing the Finite Resource That Determines Success">
    <meta name="twitter:description" content="Learn production-tested patterns for context engineering in AI agents. Real cost analysis, working code examples, and metrics frameworks that go beyond tutorials.">

    <!-- Main Stylesheet -->
    <link rel="stylesheet" href="../../css/styles.css">

    <!-- Blog-specific styles -->
    <style>
        /* Reading Progress Bar */
        .reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-primary-light));
            z-index: 9999;
            transition: width 0.1s ease-out;
        }

        /* Blog Hero */
        .blog-hero {
            padding: var(--space-2xl) var(--container-padding) var(--space-xl);
            max-width: 800px;
            margin: 0 auto;
            position: relative;
        }

        .article-meta {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: var(--space-md);
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .category-tag {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-primary-light));
            color: white;
            padding: 0.35rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
            letter-spacing: 0.3px;
        }

        .reading-time {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .reading-time svg {
            width: 16px;
            height: 16px;
            opacity: 0.6;
        }

        .blog-hero h1 {
            font-size: clamp(2rem, 4vw, 2.75rem);
            font-weight: 700;
            line-height: 1.15;
            margin-bottom: var(--space-md);
            letter-spacing: -0.5px;
        }

        .article-intro {
            font-size: 1.2rem;
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .author-byline {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-top: var(--space-md);
            padding-top: var(--space-md);
            border-top: 1px solid var(--glass-border);
        }

        .author-avatar {
            width: 44px;
            height: 44px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-primary-light));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1rem;
        }

        .author-info {
            display: flex;
            flex-direction: column;
        }

        .author-name {
            font-weight: 600;
            font-size: 0.95rem;
            color: var(--text-primary);
        }

        .author-role {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .publish-date {
            margin-left: auto;
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        /* Article Container */
        .article-container {
            max-width: 760px;
            margin: 0 auto;
            padding: 0 var(--container-padding) var(--space-3xl);
        }

        /* Article Content */
        .article-content h2 {
            font-size: 1.6rem;
            font-weight: 600;
            margin: var(--space-xl) 0 var(--space-md);
            color: var(--text-primary);
        }

        .article-content h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin: var(--space-lg) 0 var(--space-sm);
            color: var(--text-primary);
        }

        .article-content p {
            margin-bottom: var(--space-md);
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .article-content strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .article-content ul,
        .article-content ol {
            margin: var(--space-md) 0;
            padding-left: 1.5rem;
        }

        .article-content li {
            margin-bottom: 0.75rem;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        .article-content a {
            color: var(--accent-primary-light);
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: border-color 0.2s ease;
        }

        .article-content a:hover {
            border-bottom-color: var(--accent-primary-light);
        }

        /* Table of Contents */
        .toc {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin-bottom: var(--space-xl);
        }

        .toc-title {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: var(--space-sm);
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .toc-title svg {
            width: 18px;
            height: 18px;
            stroke: var(--accent-primary-light);
        }

        .toc-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .toc-list li {
            margin-bottom: 0.6rem;
        }

        .toc-list a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: color 0.2s ease;
        }

        .toc-list a::before {
            content: '';
            width: 6px;
            height: 6px;
            background: var(--accent-primary);
            border-radius: 50%;
            flex-shrink: 0;
            transition: transform 0.2s ease;
        }

        .toc-list a:hover {
            color: var(--accent-primary-light);
        }

        .toc-list a:hover::before {
            transform: scale(1.3);
        }

        /* Code Blocks with Syntax Highlighting */
        .article-content pre {
            background: #1e1e2e;
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            overflow-x: auto;
            margin: var(--space-md) 0;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.85rem;
            line-height: 1.6;
            position: relative;
        }

        .article-content pre::before {
            content: attr(data-lang);
            position: absolute;
            top: 0;
            right: 0;
            padding: 0.25rem 0.75rem;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            background: rgba(107, 124, 63, 0.3);
            color: var(--accent-primary-light);
            border-radius: 0 var(--radius-md) 0 var(--radius-sm);
            letter-spacing: 0.5px;
        }

        .article-content code {
            background: var(--bg-tertiary);
            padding: 0.2rem 0.4rem;
            border-radius: var(--radius-sm);
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.9em;
            color: #f8f8f2;
        }

        .article-content pre code {
            background: transparent;
            padding: 0;
            color: #cdd6f4;
        }

        /* Syntax highlighting colors */
        .code-keyword { color: #cba6f7; }
        .code-string { color: #a6e3a1; }
        .code-comment { color: #6c7086; font-style: italic; }
        .code-function { color: #89b4fa; }
        .code-class { color: #f9e2af; }
        .code-number { color: #fab387; }
        .code-operator { color: #89dceb; }
        .code-property { color: #f38ba8; }
        .code-type { color: #94e2d5; }

        /* Tables */
        .article-content table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--space-lg) 0;
            font-size: 0.95rem;
        }

        .article-content th,
        .article-content td {
            padding: 0.75rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--glass-border);
        }

        .article-content th {
            background: var(--glass-bg);
            color: var(--text-primary);
            font-weight: 600;
        }

        .article-content td {
            color: var(--text-secondary);
        }

        .article-content tr:hover td {
            background: var(--glass-bg);
        }

        /* Key Insight Box */
        .key-insight {
            background: linear-gradient(135deg, rgba(107, 124, 63, 0.1), rgba(107, 124, 63, 0.05));
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin: var(--space-lg) 0;
            position: relative;
        }

        .key-insight-title {
            font-weight: 700;
            color: var(--accent-primary-light);
            margin-bottom: 0.75rem;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .key-insight-title::before {
            content: '';
            width: 8px;
            height: 8px;
            background: var(--accent-primary-light);
            border-radius: 50%;
        }

        .key-insight p {
            margin: 0;
            color: var(--text-primary);
            font-size: 1.02rem;
            line-height: 1.7;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-md);
            margin: var(--space-lg) 0;
        }

        .stat-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--space-md);
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: var(--transition-normal);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-primary-light));
        }

        .stat-card:hover {
            transform: translateY(-4px);
            border-color: var(--glass-border-hover);
            box-shadow: var(--shadow-glow);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-primary-light));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: block;
            line-height: 1.1;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
            font-weight: 500;
        }

        @media (max-width: 600px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            .stat-number {
                font-size: 2rem;
            }
        }

        /* Callout Box */
        .callout {
            background: linear-gradient(135deg, rgba(184, 160, 74, 0.1), rgba(184, 160, 74, 0.05));
            border: 1px solid rgba(184, 160, 74, 0.2);
            border-left: 4px solid var(--accent-secondary);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            margin: var(--space-lg) 0;
        }

        .callout p {
            margin: 0;
            color: var(--text-secondary);
            line-height: 1.7;
        }

        .callout strong {
            color: var(--accent-secondary-light);
        }

        /* Flow Diagram */
        .flow-diagram {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            margin: var(--space-lg) 0;
            flex-wrap: wrap;
        }

        .flow-step {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            padding: 1rem 1.25rem;
            text-align: center;
            min-width: 120px;
        }

        .flow-step-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-primary-light));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 0.5rem;
        }

        .flow-step-icon svg {
            width: 20px;
            height: 20px;
            stroke: white;
        }

        .flow-step-label {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .flow-step-desc {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.25rem;
        }

        .flow-arrow {
            color: var(--accent-primary-light);
        }

        .flow-arrow svg {
            width: 24px;
            height: 24px;
        }

        @media (max-width: 600px) {
            .flow-diagram {
                flex-direction: column;
            }
            .flow-arrow {
                transform: rotate(90deg);
            }
        }

        /* Comparison Table */
        .comparison-table {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-md);
            margin: var(--space-lg) 0;
        }

        .comparison-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--space-md);
        }

        .comparison-card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: var(--space-sm);
            padding-bottom: 0.75rem;
            border-bottom: 1px dashed var(--glass-border);
        }

        .comparison-card-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-primary-light));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .comparison-card-icon svg {
            width: 22px;
            height: 22px;
            stroke: white;
        }

        .comparison-card-title {
            font-weight: 700;
            font-size: 1rem;
            color: var(--text-primary);
        }

        .comparison-card ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .comparison-card li {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            padding-left: 1.25rem;
            position: relative;
        }

        .comparison-card li::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0.5em;
            width: 6px;
            height: 6px;
            background: var(--accent-primary-light);
            border-radius: 50%;
        }

        @media (max-width: 600px) {
            .comparison-table {
                grid-template-columns: 1fr;
            }
        }

        /* Metrics Grid */
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-md);
            margin: var(--space-lg) 0;
        }

        @media (max-width: 768px) {
            .metrics-grid {
                grid-template-columns: 1fr;
            }
        }

        .metric-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--space-md);
            position: relative;
            overflow: hidden;
        }

        .metric-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-primary-light));
        }

        .metric-card-header {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: var(--space-sm);
        }

        .metric-card-icon {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-primary-light));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .metric-card-icon svg {
            width: 18px;
            height: 18px;
            stroke: white;
        }

        .metric-card-title {
            font-weight: 700;
            font-size: 0.95rem;
            color: var(--text-primary);
        }

        .metric-card-desc {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: var(--space-sm);
            line-height: 1.5;
        }

        .metric-card-formula {
            background: var(--bg-tertiary);
            border-radius: var(--radius-sm);
            padding: 0.5rem 0.75rem;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.8rem;
            color: var(--accent-primary-light);
        }

        /* Checklist */
        .checklist {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            margin: var(--space-lg) 0;
        }

        .checklist-title {
            font-weight: 700;
            font-size: 1.2rem;
            margin-bottom: var(--space-md);
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .checklist-title::before {
            content: '';
            width: 4px;
            height: 24px;
            background: linear-gradient(180deg, var(--accent-primary), var(--accent-primary-light));
            border-radius: 2px;
        }

        .checklist-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            margin-bottom: var(--space-md);
            padding-bottom: var(--space-md);
            border-bottom: 1px dashed var(--glass-border);
        }

        .checklist-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .checklist-number {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-primary-light));
            color: white;
            width: 32px;
            height: 32px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        .checklist-content h4 {
            font-size: 1.05rem;
            font-weight: 600;
            margin-bottom: 0.35rem;
            color: var(--text-primary);
        }

        .checklist-content p {
            font-size: 0.95rem;
            margin: 0;
            color: var(--text-muted);
            line-height: 1.6;
        }

        /* Mid-article CTA */
        .mid-cta {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--space-lg);
            margin: var(--space-xl) 0;
            text-align: center;
            position: relative;
        }

        .mid-cta::before {
            content: '';
            position: absolute;
            left: 50%;
            top: -12px;
            transform: translateX(-50%);
            width: 24px;
            height: 24px;
            background: var(--accent-primary);
            border-radius: 50%;
        }

        .mid-cta p {
            margin: 0;
            font-style: italic;
            color: var(--text-secondary);
            font-size: 1.05rem;
        }

        /* CTA Section */
        .cta-section {
            background: linear-gradient(135deg, rgba(107, 124, 63, 0.1), rgba(143, 163, 85, 0.05));
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            margin: var(--space-xl) 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .cta-section h2 {
            margin-top: 0;
            margin-bottom: var(--space-sm);
            font-size: 1.75rem;
        }

        .cta-section p {
            max-width: 520px;
            margin: 0 auto var(--space-lg);
            font-size: 1.05rem;
        }

        .cta-button {
            display: inline-flex;
            align-items: center;
            gap: 0.75rem;
            background: #5a6a35;
            color: #ffffff !important;
            -webkit-text-fill-color: #ffffff !important;
            padding: 1rem 2rem;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 700;
            font-size: 16px;
        }

        .cta-button:hover {
            background: #4a5a2a;
        }

        .cta-button svg {
            width: 20px;
            height: 20px;
            stroke: #ffffff !important;
        }

        .cta-button:hover svg {
            transform: translateX(4px);
        }

        /* Social Share */
        .social-share {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: var(--space-xl) 0;
            padding: var(--space-md);
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
        }

        .social-share-label {
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text-primary);
        }

        .social-share-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .social-share-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: var(--radius-sm);
            background: var(--bg-primary);
            border: 1px solid var(--glass-border);
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .social-share-btn:hover {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
            color: white;
            transform: translateY(-2px);
        }

        .social-share-btn svg {
            width: 18px;
            height: 18px;
        }

        /* Related Articles */
        .related-articles {
            margin-top: var(--space-xl);
            padding-top: var(--space-lg);
            border-top: 1px solid var(--glass-border);
        }

        .related-articles h2 {
            font-size: 1.25rem;
            margin-bottom: var(--space-md);
        }

        .related-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-md);
        }

        .related-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            padding: var(--space-md);
            text-decoration: none;
            transition: all 0.2s ease;
        }

        .related-card:hover {
            transform: translateY(-3px);
            border-color: var(--glass-border-hover);
            box-shadow: var(--shadow-md);
        }

        .related-card-tag {
            display: inline-block;
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--accent-primary-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 0.5rem;
        }

        .related-card-title {
            font-weight: 600;
            font-size: 0.95rem;
            color: var(--text-primary);
            line-height: 1.4;
            margin-bottom: 0.5rem;
        }

        .related-card-excerpt {
            font-size: 0.85rem;
            color: var(--text-muted);
            line-height: 1.5;
        }

        @media (max-width: 600px) {
            .related-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Visual Checklist */
        .visual-checklist {
            display: grid;
            gap: var(--space-md);
            margin: var(--space-lg) 0;
        }

        .visual-checklist-item {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--space-md);
            display: flex;
            align-items: flex-start;
            gap: var(--space-md);
            transition: var(--transition-normal);
        }

        .visual-checklist-item:hover {
            transform: translateX(4px);
            border-color: var(--glass-border-hover);
        }

        .visual-checklist-icon {
            width: 44px;
            height: 44px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .visual-checklist-icon svg {
            width: 24px;
            height: 24px;
            stroke: white;
        }

        .visual-checklist-icon.red { background: linear-gradient(135deg, #e74c3c, #c0392b); }
        .visual-checklist-icon.orange { background: linear-gradient(135deg, #e67e22, #d35400); }
        .visual-checklist-icon.purple { background: linear-gradient(135deg, #9b59b6, #8e44ad); }
        .visual-checklist-icon.green { background: linear-gradient(135deg, #27ae60, #1e8449); }
        .visual-checklist-icon.blue { background: linear-gradient(135deg, #3498db, #2980b9); }

        .visual-checklist-content h4 {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
            color: var(--text-primary);
        }

        .visual-checklist-content p {
            font-size: 0.9rem;
            margin: 0;
            color: var(--text-muted);
            line-height: 1.5;
        }

        /* Mistake Cards */
        .mistake-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-md);
            margin: var(--space-lg) 0;
        }

        .mistake-card {
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-lg);
            padding: var(--space-md);
            position: relative;
            overflow: hidden;
        }

        .mistake-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #e74c3c, #c0392b);
        }

        .mistake-card-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            border-radius: 50%;
            font-size: 0.85rem;
            font-weight: 700;
            margin-bottom: var(--space-sm);
        }

        .mistake-card h4 {
            font-size: 0.95rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .mistake-card p {
            font-size: 0.9rem;
            margin: 0;
            color: var(--text-muted);
            line-height: 1.5;
        }

        /* References */
        .references {
            margin-top: var(--space-2xl);
            padding-top: var(--space-lg);
            border-top: 1px solid var(--glass-border);
        }

        .references h2 {
            font-size: 1.25rem;
            margin-bottom: var(--space-md);
        }

        .reference-list {
            list-style: none;
            padding: 0;
        }

        .reference-list li {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 0.75rem;
            padding-left: 2rem;
            position: relative;
        }

        .reference-list li::before {
            content: attr(data-ref);
            position: absolute;
            left: 0;
            color: var(--accent-primary-light);
            font-weight: 600;
        }

        .reference-list a {
            color: var(--text-muted);
            word-break: break-all;
        }

        .reference-list a:hover {
            color: var(--accent-primary-light);
        }

        /* Skip to content */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--accent-primary);
            color: white;
            padding: 0.5rem 1rem;
            z-index: 1000;
            text-decoration: none;
            font-weight: 500;
            border-radius: 0 0 var(--radius-sm) 0;
            transition: top 0.3s ease;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .blog-hero h1 {
                font-size: 1.85rem;
            }

            .article-intro {
                font-size: 1.05rem;
            }

            .cta-section {
                padding: var(--space-lg);
            }

            .cta-section h2 {
                font-size: 1.4rem;
            }

            .publish-date {
                display: none;
            }
        }
    </style>
</head>

<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MBJVZS7Z"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

    <div class="reading-progress" id="reading-progress"></div>
    <a href="#main-content" class="skip-link">Skip to content</a>
    <div class="bg-glow"></div>
    <div class="bg-grid"></div>

    <nav class="navbar" role="navigation" aria-label="Main navigation">
        <div class="nav-container">
            <a href="../../index.html" class="logo" aria-label="Fenlo AI Home">
                <svg class="logo-img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 250 80" width="250" height="80">
                    <g class="logo-icon" transform="translate(0, 5)">
                        <rect x="20" y="20" width="28" height="28" class="logo-green"></rect>
                        <rect x="20" y="20" width="28" height="28" class="logo-green" transform="rotate(45 34 34)" stroke="#0a0a0f" stroke-width="3"></rect>
                    </g>
                    <g transform="translate(70, 0)">
                        <g class="logo-white">
                            <path d="M4.45 57.25L4.45 36.65L0 36.65L0 31.75L4.45 31.75L4.45 28Q4.45 24.60 6.38 22.67Q8.30 20.75 11.70 20.75L18.50 20.75L18.50 25.65L12.75 25.65Q11.60 25.65 10.90 26.35Q10.20 27.05 10.20 28.25L10.20 31.75L17.45 31.75L17.45 36.65L10.20 36.65L10.20 57.25L4.45 57.25Z"></path>
                            <path d="M33.80 57.25Q29.50 57.25 26.27 55.63Q23.05 54 21.25 51.13Q19.45 48.25 19.45 44.50Q19.45 40.55 21.05 37.55Q22.65 34.55 25.45 32.85Q28.25 31.15 31.90 31.15Q36 31.15 38.65 32.90Q41.30 34.65 42.58 37.60Q43.85 40.55 43.85 44.20Q43.85 44.70 43.80 45.35Q43.75 46 43.65 46.35L25.55 46.35Q25.85 48.35 27 49.67Q28.15 51 29.90 51.67Q31.65 52.35 33.80 52.35L40.65 52.35L40.65 57.25L33.80 57.25M25.50 42.45L38.10 42.45Q38.05 41.50 37.83 40.55Q37.60 39.60 37.13 38.75Q36.65 37.90 35.92 37.27Q35.20 36.65 34.20 36.27Q33.20 35.90 31.90 35.90Q30.40 35.90 29.25 36.47Q28.10 37.05 27.30 37.97Q26.50 38.90 26.07 40.08Q25.65 41.25 25.50 42.45Z"></path>
                            <path d="M49.20 57.25L49.20 42.55Q49.20 39.25 50.70 36.67Q52.20 34.10 54.95 32.63Q57.70 31.15 61.40 31.15Q65.10 31.15 67.83 32.63Q70.55 34.10 72.05 36.67Q73.55 39.25 73.55 42.55L73.55 57.25L67.85 57.25L67.85 42.60Q67.85 40.65 66.95 39.17Q66.05 37.70 64.58 36.88Q63.10 36.05 61.35 36.05Q59.65 36.05 58.17 36.88Q56.70 37.70 55.83 39.17Q54.95 40.65 54.95 42.60L54.95 57.25L49.20 57.25Z"></path>
                            <path d="M80.45 57.25L80.45 20.75L86.20 20.75L86.20 57.25L80.45 57.25Z"></path>
                            <path d="M105.25 57.85Q101.30 57.85 98.25 56.08Q95.20 54.30 93.43 51.27Q91.65 48.25 91.65 44.50Q91.65 40.75 93.43 37.72Q95.20 34.70 98.25 32.92Q101.30 31.15 105.25 31.15Q109.15 31.15 112.20 32.92Q115.25 34.70 117.03 37.70Q118.80 40.70 118.80 44.50Q118.80 48.25 117.03 51.27Q115.25 54.30 112.20 56.08Q109.15 57.85 105.25 57.85M105.25 52.95Q107.60 52.95 109.35 51.83Q111.10 50.70 112.05 48.80Q113 46.90 113 44.50Q113 42.15 112.05 40.22Q111.10 38.30 109.35 37.17Q107.60 36.05 105.25 36.05Q102.85 36.05 101.13 37.17Q99.40 38.30 98.43 40.20Q97.45 42.10 97.45 44.50Q97.45 46.85 98.43 48.77Q99.40 50.70 101.13 51.83Q102.85 52.95 105.25 52.95Z"></path>
                        </g>
                        <g class="logo-green">
                            <path d="M134.60 57.85Q130.95 57.85 128.30 56.05Q125.65 54.25 124.23 51.23Q122.80 48.20 122.80 44.55Q122.80 40.75 124.43 37.72Q126.05 34.70 129.08 32.92Q132.10 31.15 136.30 31.15Q140.45 31.15 143.38 32.92Q146.30 34.70 147.88 37.72Q149.45 40.75 149.45 44.45L149.45 57.25L143.70 57.25L143.70 52.50L143.60 52.50Q142.85 53.90 141.65 55.13Q140.45 56.35 138.70 57.10Q136.95 57.85 134.60 57.85M136.15 52.95Q138.40 52.95 140.08 51.83Q141.75 50.70 142.68 48.77Q143.60 46.85 143.60 44.45Q143.60 42.05 142.70 40.17Q141.80 38.30 140.15 37.17Q138.50 36.05 136.20 36.05Q133.80 36.05 132.10 37.17Q130.40 38.30 129.50 40.20Q128.60 42.10 128.60 44.50Q128.60 46.85 129.50 48.77Q130.40 50.70 132.08 51.83Q133.75 52.95 136.15 52.95Z"></path>
                            <path d="M156.35 57.25L156.35 31.75L162.10 31.75L162.10 57.25L156.35 57.25M159.20 28.20Q157.70 28.20 156.60 27.10Q155.50 26 155.50 24.50Q155.50 23 156.60 21.90Q157.70 20.80 159.20 20.80Q160.75 20.80 161.83 21.90Q162.90 23 162.90 24.50Q162.90 26 161.83 27.10Q160.75 28.20 159.20 28.20Z"></path>
                        </g>
                    </g>
                </svg>
            </a>
            <ul class="nav-links">
                <li><a href="../../index.html">Home</a></li>
                <li><a href="../services.html">Services</a></li>
                <li><a href="../blog.html" class="active">Blog</a></li>
                <li><a href="../contact.html">Contact</a></li>
            </ul>
            <button class="theme-toggle" aria-label="Toggle theme" title="Toggle light/dark theme">
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                </svg>
            </button>
            <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </nav>

    <div class="mobile-nav" aria-hidden="true">
        <a href="../../index.html">Home</a>
        <a href="../services.html">Services</a>
        <a href="../blog.html" class="active">Blog</a>
        <a href="../contact.html">Contact</a>
    </div>

    <section class="blog-hero">
        <div class="article-meta">
            <span class="category-tag">AI Engineering</span>
            <span class="reading-time" aria-label="Estimated reading time: 14 minutes">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                14 min read
            </span>
        </div>
        <h1>Context Engineering for AI Agents: Managing the Finite Resource That Determines Success</h1>
        <p class="article-intro">Learn production-tested patterns for context engineering in AI agents. Real cost analysis, working code examples, and metrics frameworks that go beyond tutorials.</p>

        <div class="author-byline">
            <div class="author-avatar">FA</div>
            <div class="author-info">
                <span class="author-name">Fenlo AI Team</span>
                <span class="author-role">AI Solutions Experts</span>
            </div>
            <span class="publish-date">January 2026</span>
        </div>
    </section>

    <article class="article-container" id="main-content">
        <div class="article-content">
            <!-- Table of Contents -->
            <nav class="toc" aria-label="Table of contents">
                <div class="toc-title">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
                    </svg>
                    In This Article
                </div>
                <ol class="toc-list">
                    <li><a href="#understanding-context">Understanding Context as a Resource</a></li>
                    <li><a href="#context-patterns">Context Engineering Patterns</a></li>
                    <li><a href="#production-challenges">Production Challenges and Solutions</a></li>
                    <li><a href="#measuring-effectiveness">Measuring Context Effectiveness</a></li>
                    <li><a href="#implementation-guide">Implementation Guide</a></li>
                    <li><a href="#conclusion">Conclusion</a></li>
                </ol>
            </nav>

            <div class="key-insight">
                <div class="key-insight-title">The Real Problem</div>
                <p>73% of agent failures trace back to poor context engineering--not model limitations, not prompt wording, not insufficient training data. Your agent isn't failing because of the model. It's failing because of context.</p>
            </div>

            <p>Andrej Karpathy described LLMs as "a new kind of operating system," with context functioning as RAM. Poorly managed context causes hallucinations and forgotten instructions--just like a computer thrashing with insufficient memory.</p>

            <p>This guide covers <strong>four battle-tested patterns</strong>, real cost analysis, working code, and metrics frameworks.</p>

            <h2 id="understanding-context">Understanding Context as a Resource</h2>

            <p>Context isn't a single thing--it's a complex allocation problem. Every agent juggles four distinct types, each competing for the same finite token budget:</p>

            <!-- Context Types Comparison -->
            <div class="comparison-table">
                <div class="comparison-card">
                    <div class="comparison-card-header">
                        <div class="comparison-card-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />
                            </svg>
                        </div>
                        <span class="comparison-card-title">Conversation Context</span>
                    </div>
                    <ul>
                        <li>History of user interactions</li>
                        <li>Questions, clarifications, responses</li>
                        <li>Grows linearly with conversation</li>
                        <li>Why long conversations degrade</li>
                    </ul>
                </div>
                <div class="comparison-card">
                    <div class="comparison-card-header">
                        <div class="comparison-card-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                            </svg>
                        </div>
                        <span class="comparison-card-title">System Context</span>
                    </div>
                    <ul>
                        <li>Instructions, persona, guidelines</li>
                        <li>Relatively stable but underestimated</li>
                        <li>2,000-4,000 tokens typical</li>
                        <li>Consumed before conversation starts</li>
                    </ul>
                </div>
                <div class="comparison-card">
                    <div class="comparison-card-header">
                        <div class="comparison-card-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z" />
                            </svg>
                        </div>
                        <span class="comparison-card-title">Tool Context</span>
                    </div>
                    <ul>
                        <li>Function definitions and schemas</li>
                        <li>Tool descriptions and results</li>
                        <li>20 tools = 3,000+ tokens</li>
                        <li>Each call adds more</li>
                    </ul>
                </div>
                <div class="comparison-card">
                    <div class="comparison-card-header">
                        <div class="comparison-card-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />
                            </svg>
                        </div>
                        <span class="comparison-card-title">Retrieved Context</span>
                    </div>
                    <ul>
                        <li>RAG systems, memory stores</li>
                        <li>External knowledge bases</li>
                        <li>Most variable (500-5,000 tokens)</li>
                        <li>Single retrieval can dominate</li>
                    </ul>
                </div>
            </div>

            <h3>The Context Budget Mental Model</h3>

            <p>Think of context as a <strong>budget, not a container</strong>. Every token has a cost--both literal (API pricing) and functional (attention dilution). The question isn't "does this fit?" but "is this worth its cost?"</p>

            <table>
                <thead>
                    <tr>
                        <th>Model</th>
                        <th>Input (per 1M tokens)</th>
                        <th>Output (per 1M tokens)</th>
                        <th>100K Context Cost</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Claude Opus 4.5</td>
                        <td>$5.00</td>
                        <td>$25.00</td>
                        <td>$0.50 input</td>
                    </tr>
                    <tr>
                        <td>Claude Sonnet 4</td>
                        <td>$3.00</td>
                        <td>$15.00</td>
                        <td>$0.30 input</td>
                    </tr>
                    <tr>
                        <td>Claude Haiku 4.5</td>
                        <td>$1.00</td>
                        <td>$5.00</td>
                        <td>$0.10 input</td>
                    </tr>
                    <tr>
                        <td>GPT-4o</td>
                        <td>$5.00</td>
                        <td>$20.00</td>
                        <td>$0.50 input</td>
                    </tr>
                    <tr>
                        <td>GPT-4o mini</td>
                        <td>$0.60</td>
                        <td>$2.40</td>
                        <td>$0.06 input</td>
                    </tr>
                    <tr>
                        <td>DeepSeek-V3</td>
                        <td>$0.28</td>
                        <td>$1.10</td>
                        <td>$0.03 input</td>
                    </tr>
                </tbody>
            </table>

            <p><em>Pricing as of January 2026. Cache hits typically reduce input costs by 90%.</em></p>

            <p>A single conversation that accumulates 100,000 tokens of context costs between $0.03 and $0.50 per turn on input alone. At scale--say, 10,000 daily conversations--poor context management can mean the difference between $300 and $5,000 in daily API costs.</p>

            <h3>Context Rot: The Hidden Performance Killer</h3>

            <p>Contrary to what tutorials suggest, larger context windows don't mean better performance. Chroma's research on "Context Rot" shows LLM accuracy <strong>degrades significantly</strong> as input length increases.</p>

            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number">20-50%</span>
                    <span class="stat-label">Accuracy drops from 10K to 100K tokens</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">18</span>
                    <span class="stat-label">Models tested including GPT-4.1, Claude 4</span>
                </div>
            </div>

            <div class="visual-checklist">
                <div class="visual-checklist-item">
                    <div class="visual-checklist-icon red">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                        </svg>
                    </div>
                    <div class="visual-checklist-content">
                        <h4>"Lost in the Middle" Effect</h4>
                        <p>Information in the middle of long contexts is retrieved less reliably than at the beginning or end.</p>
                    </div>
                </div>
                <div class="visual-checklist-item">
                    <div class="visual-checklist-icon orange">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6" />
                        </svg>
                    </div>
                    <div class="visual-checklist-content">
                        <h4>Sudden Accuracy Cliffs</h4>
                        <p>Performance doesn't decrease smoothly--models often hit sharp drop-offs at certain context lengths.</p>
                    </div>
                </div>
            </div>

            <p><strong>Bottom line:</strong> Stuffing more context into prompts isn't a strategy--it's a liability.</p>

            <h2 id="context-patterns">Context Engineering Patterns</h2>

            <p>Four essential patterns have emerged from production deployments:</p>

            <!-- Four Patterns Flow Diagram -->
            <div class="flow-diagram" role="img" aria-label="Four context engineering patterns: Compression, Prioritization, Externalization, Segmentation">
                <div class="flow-step">
                    <div class="flow-step-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                        </svg>
                    </div>
                    <div class="flow-step-label">Compression</div>
                    <div class="flow-step-desc">Reduce size, keep signal</div>
                </div>
                <div class="flow-arrow">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                    </svg>
                </div>
                <div class="flow-step">
                    <div class="flow-step-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4h13M3 8h9m-9 4h6m4 0l4-4m0 0l4 4m-4-4v12" />
                        </svg>
                    </div>
                    <div class="flow-step-label">Prioritization</div>
                    <div class="flow-step-desc">Rank by relevance</div>
                </div>
                <div class="flow-arrow">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                    </svg>
                </div>
                <div class="flow-step">
                    <div class="flow-step-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4" />
                        </svg>
                    </div>
                    <div class="flow-step-label">Externalization</div>
                    <div class="flow-step-desc">Store outside context</div>
                </div>
                <div class="flow-arrow">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                    </svg>
                </div>
                <div class="flow-step">
                    <div class="flow-step-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z" />
                        </svg>
                    </div>
                    <div class="flow-step-label">Segmentation</div>
                    <div class="flow-step-desc">Break into subtasks</div>
                </div>
            </div>

            <h3>Pattern 1: Context Compression</h3>

            <p>Compression reduces context size while preserving essential information. The goal is maintaining signal while reducing tokens.</p>

            <p><strong>When to use</strong>: Long-running conversations, extensive tool outputs, accumulated history.</p>

            <p><strong>When to avoid</strong>: When exact wording matters (legal documents, code review, precise quotes).</p>

            <p>The most practical implementation combines a buffer for recent messages with summarization for older history:</p>

            <pre data-lang="python"><code><span class="code-keyword">from</span> langchain.memory <span class="code-keyword">import</span> ConversationSummaryBufferMemory
<span class="code-keyword">from</span> langchain_anthropic <span class="code-keyword">import</span> ChatAnthropic

<span class="code-keyword">def</span> <span class="code-function">create_compressed_memory</span>(max_recent_tokens: <span class="code-type">int</span> = <span class="code-number">4000</span>):
    <span class="code-comment"># Keep recent messages verbatim, summarize older ones</span>
    llm = <span class="code-class">ChatAnthropic</span>(
        model=<span class="code-string">"claude-sonnet-4-20250514"</span>,
        max_tokens=<span class="code-number">500</span>
    )

    memory = <span class="code-class">ConversationSummaryBufferMemory</span>(
        llm=llm,
        max_token_limit=max_recent_tokens,
        return_messages=<span class="code-keyword">True</span>,
        human_prefix=<span class="code-string">"User"</span>,
        ai_prefix=<span class="code-string">"Assistant"</span>
    )
    <span class="code-keyword">return</span> memory

<span class="code-comment"># Usage</span>
memory = <span class="code-function">create_compressed_memory</span>(max_recent_tokens=<span class="code-number">4000</span>)</code></pre>

            <p><strong>Production tip</strong>: Use a cheaper, faster model for summarization. Summarizing with Haiku at $1/million tokens instead of Opus at $5/million tokens reduces compression overhead by 80% with minimal quality loss.</p>

            <h3>Pattern 2: Context Prioritization</h3>

            <p>Not all context is equally valuable. Context value is dynamic--what's relevant changes based on the current query.</p>

            <p><strong>When to use</strong>: Multi-turn conversations, multiple retrieved documents, competing context sources.</p>

            <p>A robust priority system scores items on multiple dimensions:</p>

            <pre data-lang="python"><code><span class="code-keyword">from</span> dataclasses <span class="code-keyword">import</span> dataclass, field
<span class="code-keyword">import</span> time

<span class="code-keyword">@dataclass</span>
<span class="code-keyword">class</span> <span class="code-class">ContextItem</span>:
    content: <span class="code-type">str</span>
    source: <span class="code-type">str</span>   <span class="code-comment"># "conversation", "tool", "retrieval", "system"</span>
    token_count: <span class="code-type">int</span>
    created_at: <span class="code-type">float</span> = field(default_factory=time.time)
    relevance_score: <span class="code-type">float</span> = <span class="code-number">0.5</span>
    importance: <span class="code-type">float</span> = <span class="code-number">0.5</span>

    <span class="code-keyword">@property</span>
    <span class="code-keyword">def</span> <span class="code-function">recency_score</span>(<span class="code-keyword">self</span>) -> <span class="code-type">float</span>:
        age_minutes = (time.time() - <span class="code-keyword">self</span>.created_at) / <span class="code-number">60</span>
        <span class="code-keyword">return</span> <span class="code-function">max</span>(<span class="code-number">0.1</span>, <span class="code-number">1.0</span> - (age_minutes / <span class="code-number">60</span>))

    <span class="code-keyword">@property</span>
    <span class="code-keyword">def</span> <span class="code-function">priority</span>(<span class="code-keyword">self</span>) -> <span class="code-type">float</span>:
        <span class="code-keyword">return</span> (<span class="code-keyword">self</span>.relevance_score * <span class="code-number">0.5</span> +
                <span class="code-keyword">self</span>.recency_score * <span class="code-number">0.3</span> +
                <span class="code-keyword">self</span>.importance * <span class="code-number">0.2</span>)</code></pre>

            <p><strong>Production tip</strong>: Track which context items are excluded and why. This data reveals patterns--if conversation history is consistently dropped, your system prompt might be too long. If retrieved documents are excluded, your retrieval is returning too much.</p>

            <h3>Pattern 3: Context Externalization</h3>

            <p>Move information outside the context window while keeping it accessible--the foundation of RAG systems, but extends beyond document retrieval.</p>

            <p><strong>When to use</strong>: Information occasionally needed but not required every turn, historical data, reference material.</p>

            <!-- Keep vs Externalize Comparison -->
            <div class="comparison-table">
                <div class="comparison-card">
                    <div class="comparison-card-header">
                        <div class="comparison-card-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </div>
                        <span class="comparison-card-title">Keep In Context</span>
                    </div>
                    <ul>
                        <li>Current task instructions</li>
                        <li>Active conversation (last 5-10 turns)</li>
                        <li>Tool definitions for likely actions</li>
                        <li>Critical user preferences</li>
                    </ul>
                </div>
                <div class="comparison-card">
                    <div class="comparison-card-header">
                        <div class="comparison-card-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4" />
                            </svg>
                        </div>
                        <span class="comparison-card-title">Externalize</span>
                    </div>
                    <ul>
                        <li>Historical task results</li>
                        <li>Older conversation history</li>
                        <li>Tool definitions for rare actions</li>
                        <li>General user profile data</li>
                    </ul>
                </div>
            </div>

            <h3>Pattern 4: Context Segmentation</h3>

            <p>Break complex tasks into context-bounded subtasks, each handled by a specialized agent with a clean context window.</p>

            <p><strong>When to use</strong>: Multi-step workflows, tasks requiring different expertise, long-running agents.</p>

            <p><strong>Key principle</strong>: Each segment should complete its task with minimal context from previous segments. If extensive prior context is needed, you've drawn boundaries wrong.</p>

            <h2 id="production-challenges">Production Challenges and Solutions</h2>

            <p>Theory is clean; production is messy. Here are common challenges:</p>

            <!-- Challenges Grid -->
            <div class="comparison-table">
                <div class="comparison-card">
                    <div class="comparison-card-header">
                        <div class="comparison-card-icon" style="background: linear-gradient(135deg, #e74c3c, #c0392b);">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <span class="comparison-card-title">Context Drift</span>
                    </div>
                    <ul>
                        <li><strong>Problem:</strong> Early context gets summarized/dropped in long conversations</li>
                        <li><strong>Fix:</strong> Periodic context anchoring - refresh critical info every N turns</li>
                    </ul>
                </div>
                <div class="comparison-card">
                    <div class="comparison-card-header">
                        <div class="comparison-card-icon" style="background: linear-gradient(135deg, #e67e22, #d35400);">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                        </div>
                        <span class="comparison-card-title">Tool Result Explosion</span>
                    </div>
                    <ul>
                        <li><strong>Problem:</strong> Single tool call returns 10K+ tokens, crowds out everything</li>
                        <li><strong>Fix:</strong> Tool result policies with max token budgets per tool</li>
                    </ul>
                </div>
                <div class="comparison-card">
                    <div class="comparison-card-header">
                        <div class="comparison-card-icon" style="background: linear-gradient(135deg, #9b59b6, #8e44ad);">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
                            </svg>
                        </div>
                        <span class="comparison-card-title">Lost in the Middle</span>
                    </div>
                    <ul>
                        <li><strong>Problem:</strong> Critical info buried in middle of context gets missed</li>
                        <li><strong>Fix:</strong> Position-aware assembly - important info at start and end</li>
                    </ul>
                </div>
                <div class="comparison-card">
                    <div class="comparison-card-header">
                        <div class="comparison-card-icon" style="background: linear-gradient(135deg, #27ae60, #1e8449);">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <span class="comparison-card-title">Cost Explosion</span>
                    </div>
                    <ul>
                        <li><strong>Problem:</strong> 50-turn conversation costs 10x more than 5-turn</li>
                        <li><strong>Fix:</strong> Tiered context strategies based on query complexity</li>
                    </ul>
                </div>
            </div>

            <h2 id="measuring-effectiveness">Measuring Context Effectiveness</h2>

            <p>What gets measured gets managed. Here are the core metrics:</p>

            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-number">60-80%</span>
                    <span class="stat-label">Context Utilization Target</span>
                </div>
                <div class="stat-card">
                    <span class="stat-number">&gt;40%</span>
                    <span class="stat-label">Relevant Context Ratio Target</span>
                </div>
            </div>

            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-card-header">
                        <div class="metric-card-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                            </svg>
                        </div>
                        <span class="metric-card-title">Utilization Rate</span>
                    </div>
                    <p class="metric-card-desc">% of context budget used. Too low = over-conservative. Too high = no headroom.</p>
                    <div class="metric-card-formula">tokens_used / context_window_size</div>
                </div>
                <div class="metric-card">
                    <div class="metric-card-header">
                        <div class="metric-card-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <span class="metric-card-title">Relevant Context Ratio</span>
                    </div>
                    <p class="metric-card-desc">% of context actually referenced in response. Below 40% = wasted tokens.</p>
                    <div class="metric-card-formula">tokens_referenced / total_context</div>
                </div>
                <div class="metric-card">
                    <div class="metric-card-header">
                        <div class="metric-card-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <span class="metric-card-title">Cost per Success</span>
                    </div>
                    <p class="metric-card-desc">True efficiency metric. Total tokens for successful completions only.</p>
                    <div class="metric-card-formula">total_tokens / successful_tasks</div>
                </div>
                <div class="metric-card">
                    <div class="metric-card-header">
                        <div class="metric-card-icon">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                            </svg>
                        </div>
                        <span class="metric-card-title">Context Failure Rate</span>
                    </div>
                    <p class="metric-card-desc">% of failures from truncation, missing info, or outdated data.</p>
                    <div class="metric-card-formula">context_failures / total_failures</div>
                </div>
            </div>

            <!-- Mid-article CTA -->
            <div class="mid-cta">
                <p>Struggling with context management in your AI agents? Fenlo AI can help you implement these patterns in production. Book a free discovery call to discuss your specific challenges.</p>
            </div>

            <h2 id="implementation-guide">Implementation Guide</h2>

            <p>A practical 5-step path to implementing context engineering:</p>

            <div class="checklist">
                <div class="checklist-title">5-Step Implementation Checklist</div>

                <div class="checklist-item">
                    <span class="checklist-number">1</span>
                    <div class="checklist-content">
                        <h4>Audit Current Context Usage</h4>
                        <p>Log complete context payloads for 100+ conversations. Calculate average context size per turn. Identify largest consumers (usually tool results or retrieved documents). Track failure correlations with context state.</p>
                    </div>
                </div>

                <div class="checklist-item">
                    <span class="checklist-number">2</span>
                    <div class="checklist-content">
                        <h4>Implement Context Budgeting</h4>
                        <p>Set initial budget based on model limits (leave 20% headroom). Reserve tokens for system prompts. Allocate remaining budget across context types. Log utilization metrics from day one.</p>
                    </div>
                </div>

                <div class="checklist-item">
                    <span class="checklist-number">3</span>
                    <div class="checklist-content">
                        <h4>Add Compression Layer</h4>
                        <p>Implement ConversationSummaryBufferMemory or equivalent. Set buffer size based on average useful history length. Monitor for compression that loses critical information. Tune aggressiveness based on observed issues.</p>
                    </div>
                </div>

                <div class="checklist-item">
                    <span class="checklist-number">4</span>
                    <div class="checklist-content">
                        <h4>Build Context Observability</h4>
                        <p>Implement the ContextObserver pattern. Create dashboards for utilization, exclusion rates, and costs. Set alerts for anomalies. Review weekly to identify optimization opportunities.</p>
                    </div>
                </div>

                <div class="checklist-item">
                    <span class="checklist-number">5</span>
                    <div class="checklist-content">
                        <h4>Iterate Based on Metrics</h4>
                        <p>Run A/B tests on strategy changes. Analyze failure cases for context-related root causes. Adjust budgets and priorities based on production data. Document what works for your specific use case.</p>
                    </div>
                </div>
            </div>

            <h3>Common Implementation Mistakes</h3>

            <div class="mistake-grid">
                <div class="mistake-card">
                    <span class="mistake-card-number">1</span>
                    <h4>Too Conservative Limits</h4>
                    <p>Using only 40% of available context = leaving capability on the table.</p>
                </div>
                <div class="mistake-card">
                    <span class="mistake-card-number">2</span>
                    <h4>Equal Treatment</h4>
                    <p>Tool results and documents need different budgets than conversation history.</p>
                </div>
                <div class="mistake-card">
                    <span class="mistake-card-number">3</span>
                    <h4>Over-Compression</h4>
                    <p>If users say "I already told you that," compression is losing critical info.</p>
                </div>
                <div class="mistake-card">
                    <span class="mistake-card-number">4</span>
                    <h4>Ignoring Position</h4>
                    <p>Burying critical instructions in the middle of long contexts reduces recall.</p>
                </div>
                <div class="mistake-card">
                    <span class="mistake-card-number">5</span>
                    <h4>No Measurement</h4>
                    <p>Without metrics, context engineering becomes pure guesswork.</p>
                </div>
            </div>

            <h2 id="conclusion">Conclusion</h2>

            <p>Context engineering is the primary determinant of whether your agent succeeds or fails in production. The four patterns--<strong>compression, prioritization, externalization, and segmentation</strong>--transform context from a source of mysterious failures into a well-understood, optimizable system.</p>

            <div class="key-insight">
                <div class="key-insight-title">Your Monday morning action items</div>
                <p><strong>1. Measure:</strong> Add logging to capture your current context sizes and utilization rates<br>
                <strong>2. Analyze:</strong> Review 10 failed conversations and check for context-related causes<br>
                <strong>3. Budget:</strong> Implement basic context budgeting with your model's limits<br>
                <strong>4. Compress:</strong> Add conversation summarization for histories over 10 turns<br>
                <strong>5. Track:</strong> Set up a dashboard for context metrics</p>
            </div>

            <p>Context engineering is an ongoing discipline with substantial payoffs: agents that maintain coherence, costs that scale predictably, and failures that trace to understandable causes.</p>

            <div class="cta-section">
                <h2>Need Help with Context Engineering?</h2>
                <p>FenloAI specializes in building production AI agents with robust context engineering. If you're struggling with agents that degrade over long conversations, context costs that spiral at scale, or mysterious failures that resist debugging, let's talk about your specific challenges.</p>
                <a href="../contact.html" class="cta-button">
                    Get in Touch
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                    </svg>
                </a>
            </div>

            <!-- Social Share -->
            <div class="social-share">
                <span class="social-share-label">Share this article:</span>
                <div class="social-share-buttons">
                    <a href="https://twitter.com/intent/tweet?url=https://fenloai.com/blog/context-engineering&text=Context%20Engineering%20for%20AI%20Agents%3A%20Managing%20the%20Finite%20Resource%20That%20Determines%20Success" target="_blank" rel="noopener" class="social-share-btn" aria-label="Share on Twitter">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path>
                        </svg>
                    </a>
                    <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://fenloai.com/blog/context-engineering" target="_blank" rel="noopener" class="social-share-btn" aria-label="Share on LinkedIn">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path>
                        </svg>
                    </a>
                    <a href="mailto:?subject=Interesting%20article%20about%20Context%20Engineering&body=Check%20out%20this%20article%3A%20https://fenloai.com/blog/context-engineering" class="social-share-btn" aria-label="Share via Email">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Related Articles -->
            <div class="related-articles">
                <h2>Related Articles</h2>
                <div class="related-grid">
                    <a href="mcp-protocol-guide.html" class="related-card">
                        <span class="related-card-tag">AI Integration</span>
                        <h3 class="related-card-title">MCP (Model Context Protocol): The Universal Standard for AI Tool Integration</h3>
                        <p class="related-card-excerpt">A practical guide to MCP - the protocol unifying how AI agents connect to tools.</p>
                    </a>
                    <a href="escaping-pilot-purgatory.html" class="related-card">
                        <span class="related-card-tag">AI Strategy</span>
                        <h3 class="related-card-title">Escaping Pilot Purgatory: Why 95% of AI Projects Fail to Scale</h3>
                        <p class="related-card-excerpt">Learn why most AI pilots never reach production and the proven framework for scaling.</p>
                    </a>
                </div>
            </div>

            <div class="references">
                <h2>References</h2>
                <ol class="reference-list">
                    <li data-ref="[1]">Anthropic Engineering. "Effective Context Engineering for AI Agents." <a href="https://www.anthropic.com/engineering/effective-context-engineering-for-ai-agents" target="_blank" rel="noopener">anthropic.com</a></li>
                    <li data-ref="[2]">Chroma Research. "Context Rot - How Increasing Input Tokens Impacts LLM Performance." <a href="https://research.trychroma.com/context-rot" target="_blank" rel="noopener">research.trychroma.com</a></li>
                    <li data-ref="[3]">LangChain. "Context Engineering for Agents." <a href="https://blog.langchain.com/context-engineering-for-agents/" target="_blank" rel="noopener">blog.langchain.com</a></li>
                    <li data-ref="[4]">LangGraph Documentation. "Context Engineering." <a href="https://docs.langchain.com/oss/python/langchain/context-engineering" target="_blank" rel="noopener">docs.langchain.com</a></li>
                    <li data-ref="[5]">MongoDB. "Powering Long-Term Memory for Agents with LangGraph." <a href="https://www.mongodb.com/company/blog/product-release-announcements/powering-long-term-memory-for-agents-langgraph" target="_blank" rel="noopener">mongodb.com</a></li>
                </ol>
            </div>
        </div>
    </article>

    <footer role="contentinfo">
        <div class="footer-links">
            <a href="../legal/privacy.html">Privacy Policy</a>
            <a href="../legal/terms.html">Terms of Service</a>
        </div>
        <p>&copy; 2025 Fenlo AI. All rights reserved.</p>
        <a href="mailto:contact@fenloai.com" class="email">contact@fenloai.com</a>
    </footer>

    <!-- Cookie Consent Banner -->
    <div class="cookie-consent" id="cookie-consent" role="dialog" aria-label="Cookie consent">
        <div class="cookie-consent-content">
            <div class="cookie-consent-text">
                <p>We use cookies to analyze site traffic and improve your experience. By continuing to use our site, you consent to our use of cookies. <a href="../legal/privacy.html">Learn more</a></p>
            </div>
            <div class="cookie-consent-buttons">
                <button class="btn btn-secondary" id="cookie-decline">Decline</button>
                <button class="btn btn-primary" id="cookie-accept">Accept</button>
            </div>
        </div>
    </div>

    <script>
        // Mobile menu toggle
        const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
        const mobileNav = document.querySelector('.mobile-nav');

        if (mobileMenuToggle && mobileNav) {
            mobileMenuToggle.addEventListener('click', () => {
                const isActive = mobileMenuToggle.classList.toggle('active');
                mobileNav.classList.toggle('active');
                mobileMenuToggle.setAttribute('aria-expanded', isActive);
                mobileNav.setAttribute('aria-hidden', !isActive);
                document.body.style.overflow = isActive ? 'hidden' : '';
            });

            mobileNav.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenuToggle.classList.remove('active');
                    mobileNav.classList.remove('active');
                    mobileMenuToggle.setAttribute('aria-expanded', 'false');
                    mobileNav.setAttribute('aria-hidden', 'true');
                    document.body.style.overflow = '';
                });
            });
        }

        // Reading progress indicator
        const progressBar = document.getElementById('reading-progress');
        const article = document.getElementById('main-content');

        function updateProgress() {
            const articleRect = article.getBoundingClientRect();
            const articleTop = articleRect.top + window.scrollY;
            const articleHeight = articleRect.height;
            const windowHeight = window.innerHeight;
            const scrollY = window.scrollY;

            const start = articleTop - windowHeight;
            const end = articleTop + articleHeight - windowHeight;
            const progress = Math.min(Math.max((scrollY - start) / (end - start) * 100, 0), 100);

            progressBar.style.width = progress + '%';
        }

        window.addEventListener('scroll', updateProgress);
        updateProgress();

        // Cookie Consent Banner
        (function() {
            const consentBanner = document.getElementById('cookie-consent');
            const acceptBtn = document.getElementById('cookie-accept');
            const declineBtn = document.getElementById('cookie-decline');
            const CONSENT_KEY = 'fenloai_cookie_consent';

            const consent = localStorage.getItem(CONSENT_KEY);
            if (!consent) {
                setTimeout(() => {
                    consentBanner.classList.add('visible');
                }, 1000);
            }

            acceptBtn.addEventListener('click', () => {
                localStorage.setItem(CONSENT_KEY, 'accepted');
                consentBanner.classList.remove('visible');
            });

            declineBtn.addEventListener('click', () => {
                localStorage.setItem(CONSENT_KEY, 'declined');
                consentBanner.classList.remove('visible');
            });
        })();

        // Theme Toggle
        (function() {
            const THEME_KEY = 'fenloai_theme';
            const themeToggle = document.querySelector('.theme-toggle');

            // Get saved theme or default to dark
            const savedTheme = localStorage.getItem(THEME_KEY) || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);

            if (themeToggle) {
                themeToggle.addEventListener('click', () => {
                    const currentTheme = document.documentElement.getAttribute('data-theme');
                    const newTheme = currentTheme === 'light' ? 'dark' : 'light';

                    document.documentElement.setAttribute('data-theme', newTheme);
                    localStorage.setItem(THEME_KEY, newTheme);
                });
            }
        })();
    </script>
</body>
</html>
